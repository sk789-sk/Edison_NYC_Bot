This is just copy pasted from the TO_Bot stuff. need to go through it again